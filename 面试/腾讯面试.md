# 一面记录



## 项目

为什么不用dr模式，为什么需要做端口映射

为什么需要nginx，为什么nginx不直接进行负载均衡

为什么不用service来做apiserver的负载

nginx只能做七层吗？七层和四层有什么区别？



忙闲变化怎么办？



## C++

1.考指针

int *p = 0;int *r = ++p; 会发生段错误吗，r=？

回答：我回答全部错误。。。 

自测结果：测试之后发现，并未发生段错误，r=0x4

2.考多态与继承

Drived *p = new Drived();

base * q = (base *) p;

（1）基类和派生类构造函数的顺序

（2）pq调用的虚函数分别是谁的

正确答案：虚函数，p调用子类，q调用子类

（3）pq调用的非虚函数分别是谁的

正确答案：非虚函数，p调用子类，q调用父类

（4）q和p指向的地址是一样的吗，可能会不一样吗

回答：一样，不确定对不对

3.malloc和free会发生什么



## 操作系统

1.进程线程区别 （会）

2.线程死锁写一个，死锁怎么避免，另一个进程如何释放锁 （不会）

回答：检测死锁，没答如何释放

自己查了下：死锁可以通过破坏死锁条件来避免死锁；也可以通过检测死锁来恢复

​	破坏死锁条件，比如可以一次获得所有所需资源，比如资源排序

​	检测死锁后恢复可以通过设置时间点回滚，或者可以直接杀死进程

3.访问一个大文件，第一次一个进程访问，第二次进程访问会快吗（不会）

4.两个进程之间访问某一个临界资源，怎么控制（不会）

5.两个shell之间访问某个资源，怎么控制 （不会）

6.一个进程打开文件之后，另一个进程要去删除会怎样 （不会）

回答：提示不能删

自测结果：删除成功，另一进程如果使用wq，会重新生成文件；如果使用q，则该文件被删除

7.一个进程死了，如何通知另一个进程 (不会)

自己查了一下，wait(status)只能用于父子进程



## 计算机网络

1.交换机的原理，arp存到哪？ （不会）

2.socket程序写过吗，网络参数中mq （不会）



## 数据结构

1.查找，插入，删除都频繁你采用什么数据结构？

回答：红黑树 (不知道对不对，现在感觉不对，感觉使用哈希表挺好的)

2.红黑树怎么查找

3.哈希表怎么设计 （会）



## 算法 

树的层次遍历 （会）



## 容器

如何添加cgroup，namespace，如何对一个进程进行限制，如果让一个进程退出cgroup

如何进入namespace

容器主进程退出，容器整个就退出了吗

自测结果：会退出，估计是主进程退出时，会同时给子进程发送kill信号



## k8s

组件

各组件通信

调度流程？scheduler可否直接告诉kubelet



## 开放性问题

给一块内存，设计一套内存分配方案

回答：空闲链表的设计(链表，hash)，释放时的合并





# 二面记录

ipvs和lvs的关系：ipvs是lvs的核心实现

apiserver怎么部署

是为了解决高可用还是负载均衡

创建一个容器的过程

iptables的四表五链

算法题：链表每k个逆序（没做出来，好可惜，紧张了，面试结束后几分钟解决）







