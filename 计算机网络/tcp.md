# 四次挥手

# time_wait

1.确保最后的ACK报文能让被动关闭方接收

2.保证旧连接的报文在网络中自然消亡



三次握手

两次会发生啥

由于网络原因产生延迟的网络包到达服务器后，服务器会再次打开连接，造成资源浪费

采用三次握手是为了防止失效的连接请求报文段突然又传送到主机B，因而产生错误。失效的连接请求报文段是指：主机A发出的连接请求没有收到主机B的确认，于是经过一段时间后，主机A又重新向主机B发送连接请求，且建立成功，顺序完成数据传输。考虑这样一种特殊情况，主机A第一次发送的连接请求并没有丢失，而是因为网络节点导致延迟达到主机B，主机B以为是主机A又发起的新连接，于是主机B同意连接，并向主机A发回确认，但是此时主机A根本不会理会，主机B就一直在等待主机A发送数据，导致主机B的资源浪费。



